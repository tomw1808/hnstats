function getNewcombinatorSpanFromResults(a){var b=JSON.parse(a.response),c=document.createElement("span");if("response"in b&&"docs"in b.response&&b.response.docs.length>0){for(var d=b.response.docs[0],e=d.hn_num_points+" upvotes and "+d.hn_num_comments+" comments in ",f=document.createElement("span"),g=0;g<d.source_links.length;g++){var h=document.createElement("a");h.setAttribute("href",d.source_links[g]),h.setAttribute("style","margin-left: 2px");var i=document.createElement("img");i.setAttribute("style","width: 1em; height: 1em;"),i.setAttribute("src",getNewscombinatorFavicon(d.source_links[g])),h.appendChild(i),f.appendChild(h)}e+=f.outerHTML,c.innerHTML=e}return c.setAttribute("id","nagrgt-iframe"),c}function getNewscombinatorFavicon(a){var b=document.createElement("a");b.href=a;var c="favicon.ico";return-1!=b.hostname.indexOf("makerland")&&(c="static/img/makerland_favicon_SMALL.ico"),-1!=b.hostname.indexOf("soylentnews")&&(c="favicon-soylentnews.png"),-1!=b.hostname.indexOf("inbound")&&(c="assets/sites/inbound/img/fav.ico"),b.protocol+"//"+b.hostname+"/"+c}function newscombinatorLoadComments(a,b){function h(){c.readyState<4||200===c.status&&4===c.readyState&&b(c)}var c;if(a="http://api.nagrgtr.com/api/search/?q="+encodeURIComponent('url:"'+a.replace(/(ref|trk|hn|m|mbid|lang|mt|referrer|smid|mod|partner|_\w*)=[^&]*&?/gi,"")+'"')+"&rows=1","undefined"!=typeof XMLHttpRequest)c=new XMLHttpRequest;else for(var d=["MSXML2.XmlHttp.5.0","MSXML2.XmlHttp.4.0","MSXML2.XmlHttp.3.0","MSXML2.XmlHttp.2.0","Microsoft.XmlHttp"],e=0,f=d.length;f>e;e++)try{c=new ActiveXObject(d[e]);break}catch(g){}c.onreadystatechange=h,c.open("GET",a,!0),c.send("")}